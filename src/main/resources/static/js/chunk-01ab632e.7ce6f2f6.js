(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01ab632e"],{"1cde":function(t,e,o){"use strict";o("7166")},"25b1":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-modal",{attrs:{title:"修改头像",visible:t.visible,maskClosable:!1,confirmLoading:t.confirmLoading,width:800,footer:null},on:{cancel:t.cancelHandel}},[o("a-row",[o("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[o("vue-cropper",{ref:"cropper",attrs:{img:t.options.img,info:!0,autoCrop:t.options.autoCrop,autoCropWidth:t.options.autoCropWidth,autoCropHeight:t.options.autoCropHeight,fixedBox:t.options.fixedBox},on:{realTime:t.realTime}})],1),o("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[o("div",{staticClass:"avatar-upload-preview"},[o("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])],1),o("br"),o("a-row",[o("a-col",{attrs:{lg:2,md:2}},[o("a-upload",{attrs:{name:"file",beforeUpload:t.beforeUpload,showUploadList:!1}},[o("a-button",{attrs:{icon:"upload"}},[t._v("选择图片")])],1)],1),o("a-col",{attrs:{lg:{span:1,offset:2},md:2}},[o("a-button",{attrs:{icon:"plus"},on:{click:function(e){return t.changeScale(1)}}})],1),o("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[o("a-button",{attrs:{icon:"minus"},on:{click:function(e){return t.changeScale(-1)}}})],1),o("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[o("a-button",{attrs:{icon:"undo"},on:{click:t.rotateLeft}})],1),o("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[o("a-button",{attrs:{icon:"redo"},on:{click:t.rotateRight}})],1),o("a-col",{attrs:{lg:{span:2,offset:6},md:2}},[o("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.finish("blob")}}},[t._v("保存")])],1)],1)],1)},r=[],n=(o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("c24f")),i={data:function(){return{visible:!1,id:null,confirmLoading:!1,fileList:[],uploading:!1,options:{img:"",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},fileName:"",previews:{}}},methods:{edit:function(t){var e=this;this.fileName=t.name,this.visible=!0;var o=new FileReader;o.readAsDataURL(t),o.onload=function(){e.options.img=o.result}},close:function(){this.id=null,this.visible=!1},cancelHandel:function(){this.close()},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},beforeUpload:function(t){var e=this,o=new FileReader;return o.readAsDataURL(t),o.onload=function(){e.options.img=o.result},!1},finish:function(t){var e=this;this.$log.debug("starting upload image...");var o=this,a=new FormData;"blob"===t?this.$refs.cropper.getCropBlob((function(t){var r=window.URL.createObjectURL(t);e.model=!0,e.modelSrc=r,a.append("file",t,e.fileName),n["a"].uploadAvatar(a).then((function(t){e.$log.debug("success, upload response:",t.data),o.$emit("success",t.data),o.visible=!1}))})):this.$refs.cropper.getCropData((function(t){e.model=!0,e.modelSrc=t}))},okHandel:function(){var t=this;t.confirmLoading=!0,setTimeout((function(){t.confirmLoading=!1,t.close(),t.$message.success("上传头像成功")}),2e3)},realTime:function(t){this.previews=t}}},s=i,c=(o("1cde"),o("2877")),u=Object(c["a"])(s,a,r,!1,null,"f9442f44",null);e["default"]=u.exports},7166:function(t,e,o){},c24f:function(t,e,o){"use strict";var a=o("b775"),r={list:function(t){return Object(a["b"])({url:"/user/list",method:"get",params:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})},create:function(t){return Object(a["b"])({url:"/user",method:"post",data:t})},update:function(t){return Object(a["b"])({url:"/user",method:"put",data:t})},updateProfile:function(t){return Object(a["b"])({url:"/user/profile",method:"put",data:t})},updateAvatar:function(t){return Object(a["b"])({url:"/user/avatar?avatar=".concat(t),method:"put"})},uploadAvatar:function(t){return Object(a["b"])({url:"/user/avatar/upload",method:"post",data:t})},updatePassword:function(t){return Object(a["b"])({url:"/user/password",method:"put",data:t})},resetPassword:function(t){return Object(a["b"])({url:"/user/reset/".concat(t),method:"put"})},checkUsername:function(t){return Object(a["b"])({url:"/user/check/username",method:"get",params:{username:t}})},checkEmail:function(t){return Object(a["b"])({url:"/user/check/email",method:"get",params:{email:t}})},lockUser:function(t){return Object(a["b"])({url:"/user/lock/".concat(t),method:"put"})},unlockUser:function(t){return Object(a["b"])({url:"/user/unlock/".concat(t),method:"put"})},deleteUser:function(t){return Object(a["b"])({url:"/user",method:"delete",data:t})}};e["a"]=r}}]);