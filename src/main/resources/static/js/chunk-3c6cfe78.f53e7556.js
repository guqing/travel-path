(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c6cfe78","chunk-2d0d38e4"],{"59e4":function(e,t,a){"use strict";var n=a("b775"),i={list:function(e){return Object(n["b"])({url:"/log/action",method:"get",params:e})},listByUser:function(e){return Object(n["b"])({url:"/log/action/user",method:"get",params:e})}};t["a"]=i},"5cee":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"日志详情",visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-descriptions",{attrs:{column:1}},[a("a-descriptions-item",{attrs:{label:"操作人"}},[e._v(" "+e._s(e.actionLog.username)+" ")]),a("a-descriptions-item",{attrs:{label:"操作内容"}},[e._v(" "+e._s(e.actionLog.operation)+" ")]),a("a-descriptions-item",{attrs:{label:"方法名"}},[e._v(" "+e._s(e.actionLog.method)+" ")]),a("a-descriptions-item",{attrs:{label:"方法参数"}},[e._v(" "+e._s(e.actionLog.params)+" ")]),a("a-descriptions-item",{attrs:{label:"耗时"}},[e._v(" "+e._s(e.actionLog.executionTime)+" ")]),a("a-descriptions-item",{attrs:{label:"操作IP"}},[e._v(" "+e._s(e.actionLog.ip)+" ")]),a("a-descriptions-item",{attrs:{label:"操作位置"}},[e._v(" "+e._s(e.actionLog.location)+" ")]),a("a-descriptions-item",{attrs:{label:"操作时间"}},[e._v(" "+e._s(e.actionLog.createTime)+" ")])],1)],1)],1)},i=[],o={name:"UserModal",data:function(){return{visible:!1,confirmLoading:!1,actionLog:{}}},methods:{close:function(){this.$emit("close"),this.visible=!1},detail:function(e){this.visible=!0,this.actionLog=Object.assign({},e)},handleOk:function(){this.actionLog={},this.close()},handleCancel:function(){this.actionLog={},this.close()}}},r=o,s=a("2877"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},"85f2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:4,sm:24}},[n("a-form-item",{attrs:{label:"操作人"}},[n("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.username,callback:function(e){t.$set(t.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),n("a-col",{attrs:{md:4,sm:24}},[n("a-form-item",{attrs:{label:"操作内容"}},[n("a-input-number",{staticStyle:{width:"100%"},model:{value:t.queryParam.callNo,callback:function(e){t.$set(t.queryParam,"callNo",e)},expression:"queryParam.callNo"}})],1)],1),n("a-col",{attrs:{md:5,sm:24}},[n("a-form-item",{attrs:{label:"操作时间"}},[n("a-range-picker",{staticStyle:{width:"100%"},on:{change:t.onDatePickerChange}})],1)],1),n("a-col",{attrs:{md:4,sm:24}},[n("a-form-item",{attrs:{label:"操作地点"}},[n("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.location,callback:function(e){t.$set(t.queryParam,"location",e)},expression:"queryParam.location"}})],1)],1),n("a-col",{attrs:{md:4,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary"},on:{click:function(e){t.$refs.table.refresh(!0)}}},[t._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.resetSearchForm}},[t._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[t.selectedRowKeys.length>0?n("a-dropdown",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[t._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1):t._e()],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData,alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},scopedSlots:t._u([{key:"action",fn:function(e,a){return n("span",{},[[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.$refs.modal.detail(a)}}},[t._v("详情")]),n("a-divider",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{type:"vertical"}}),n("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(e){return t.handleDelete(a)}}},[t._v("删除")])]],2)}}])}),n("action-modal",{ref:"modal"})],1)},i=[],o=a("2af9"),r=a("59e4"),s=a("5cee"),l={name:"ActionLog",components:{STable:o["i"],ActionModal:s["default"]},data:function(){var e=this,t=this.$createElement;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"操作人",dataIndex:"username"},{title:"内容",dataIndex:"operation",ellipsis:!0},{title:"方法",dataIndex:"method",ellipsis:!0},{title:"入参",dataIndex:"params",ellipsis:!0},{title:"执行耗时",dataIndex:"executionTime",sorter:!0,customRender:function(e){return t("a-tag",{attrs:{color:"green"}},[e," ms"])}},{title:"IP",dataIndex:"ip"},{title:"位置",dataIndex:"location"},{title:"操作时间",dataIndex:"createTime",sorter:!0},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(t){var a={};return a.current=t.pageNo,a.pageSize=t.pageSize,Object.assign(a,e.queryParam),e.$log.debug("loadData.parameter",a),r["a"].list(a).then((function(e){return{pageSize:e.data.pageSize,pageNo:e.data.current,totalCount:e.data.total,totalPage:e.data.pages,data:e.data.list}})).catch((function(t){return e.$message.error("查询出错:".concat(t)),{pageSize:0,pageNo:1,totalCount:0,totalPage:0,data:[]}}))},selectedRowKeys:[],selectedRows:[]}},methods:{onDatePickerChange:function(e,t){this.queryParam.createFrom=t[0],this.queryParam.createTo=t[1]},handleDelete:function(e){this.$log.debug("删除记录:",e)},handleOk:function(){},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={createFrom:null,createTo:null},this.$refs.table.refresh()}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,i,!1,null,null,null);t["default"]=u.exports}}]);