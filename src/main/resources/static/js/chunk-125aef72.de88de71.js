(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-125aef72","chunk-a5cfedfa","chunk-b84107b0"],{"260d":function(t,e,n){t.exports=n.p+"assets/end_point.45451854.svg"},"2e27":function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d}));var a=n("e11e"),o=a["Icon"].extend({options:{iconUrl:n("d5bb"),shadowUrl:n("e2b9"),shadowAnchor:[14,41],iconSize:[25,39],iconAnchor:[13,38]}}),i=new o({iconUrl:n("c88e")}),r=new o({iconUrl:n("6a91")}),s=new o({iconUrl:n("260d")}),l=(new o({iconUrl:n("742d")}),new o({iconUrl:n("9e10")})),d=new o({iconUrl:n("d5bb")})},"38f8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-wrapper"},[n("div",{style:{cursor:t.cursor},attrs:{id:"mapContainer"}})])},o=[],i=(n("d81d"),n("6cc5"),n("e11e")),r=(n("ca06"),n("53b7"),"https://api.mapbox.com/styles/v1/guqing/ckis880630pby19ohlzsqtuki/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZ3VxaW5nIiwiYSI6ImNqdmtmNGh4bjBxdmg0OXFyMDI0dHc3emQifQ.AAGR_XTCwYALRFQmtAwmHA"),s={name:"LeafletMap",props:{cursor:{type:String,required:!1,default:null},bounds:{type:Array,required:!1,default:function(){return[[32.948,107.708],[37.139,113.161]]}}},data:function(){return{map:{}}},mounted:function(){this.init()},methods:{init:function(){var t=i["latLng"](this.bounds[0][0],this.bounds[0][1]),e=i["latLng"](this.bounds[1][0],this.bounds[1][1]),n=i["latLngBounds"](t,e);this.map=new i["Map"]("mapContainer",{maxBounds:n,center:[34.26099394982405,108.94237697124483],zoom:14,zoomControl:!0,loadingControl:!0}),this.L.tileLayer(r,{foo:"bar",attribution:'Map data &copy; <a href="https://github.com/guqing">guqing</a>',minZoom:3}).addTo(this.map),i["rectangle"](n,{width:2,color:"#000",opacity:.3,fill:!1}).addTo(this.map),this.$emit("onMapInit",this.map)}}},l=s,d=(n("be76"),n("2877")),c=Object(d["a"])(l,a,o,!1,null,"af30a2f4",null);e["a"]=c.exports},"4e02":function(t,e,n){"use strict";var a=n("b775"),o={list:function(t){return Object(a["b"])({url:"/deploy/list",method:"get",params:t})},getById:function(t){return Object(a["b"])({url:"/deploy/".concat(t),method:"get"})},create:function(t){return Object(a["b"])({url:"/deploy",method:"post",data:t})},updateById:function(t,e){return Object(a["b"])({url:"/deploy/".concat(t),method:"put",data:e})}};e["a"]=o},"53b7":function(t,e,n){},"6a91":function(t,e,n){t.exports=n.p+"assets/start_point.9c72ff17.svg"},"742d":function(t,e,n){t.exports=n.p+"assets/blue.1805d0e3.svg"},8857:function(t,e,n){"use strict";var a=n("b775"),o={create:function(t){return Object(a["b"])({url:"/preset",method:"post",data:t})},updateById:function(t,e){return Object(a["b"])({url:"/preset/".concat(t),method:"put",data:e})},list:function(t){return Object(a["b"])({url:"/preset/list",method:"get",params:t})},getById:function(t){return Object(a["b"])({url:"/preset/".concat(t),method:"get"})},deleteByIds:function(t){return Object(a["b"])({url:"/preset",method:"delete",data:t})},deleteById:function(t){return Object(a["b"])({url:"/preset",method:"delete",data:[t]})}};e["a"]=o},"88bc":function(t,e,n){(function(e){var n=1/0,a=9007199254740991,o="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,c=l||d||Function("return this")();function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function h(t,e){var n=-1,a=t?t.length:0,o=Array(a);while(++n<a)o[n]=e(t[n],n,t);return o}function f(t,e){var n=-1,a=e.length,o=t.length;while(++n<a)t[o+n]=e[n];return t}var p=Object.prototype,m=p.hasOwnProperty,y=p.toString,g=c.Symbol,b=p.propertyIsEnumerable,v=g?g.isConcatSpreadable:void 0,w=Math.max;function C(t,e,n,a,o){var i=-1,r=t.length;n||(n=I),o||(o=[]);while(++i<r){var s=t[i];e>0&&n(s)?e>1?C(s,e-1,n,a,o):f(o,s):a||(o[o.length]=s)}return o}function _(t,e){return t=Object(t),L(t,e,(function(e,n){return n in t}))}function L(t,e,n){var a=-1,o=e.length,i={};while(++a<o){var r=e[a],s=t[r];n(s,r)&&(i[r]=s)}return i}function k(t,e){return e=w(void 0===e?t.length-1:e,0),function(){var n=arguments,a=-1,o=w(n.length-e,0),i=Array(o);while(++a<o)i[a]=n[e+a];a=-1;var r=Array(e+1);while(++a<e)r[a]=n[a];return r[e]=i,u(t,this,r)}}function I(t){return S(t)||O(t)||!!(v&&t&&t[v])}function x(t){if("string"==typeof t||P(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}function O(t){return j(t)&&m.call(t,"callee")&&(!b.call(t,"callee")||y.call(t)==o)}var S=Array.isArray;function M(t){return null!=t&&R(t.length)&&!z(t)}function j(t){return B(t)&&M(t)}function z(t){var e=D(t)?y.call(t):"";return e==i||e==r}function R(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function D(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function B(t){return!!t&&"object"==typeof t}function P(t){return"symbol"==typeof t||B(t)&&y.call(t)==s}var $=k((function(t,e){return null==t?{}:_(t,h(C(e,1),x))}));t.exports=$}).call(this,n("c8ba"))},"9e10":function(t,e,n){t.exports=n.p+"assets/red.71758f32.svg"},b23e:function(t,e,n){},bd22:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-drawer",{attrs:{title:t.title,width:t.width,placement:"right",closable:!1,visible:t.visible},on:{close:t.handleOnClose}},[n("a-table",{attrs:{columns:t.columns,rowKey:function(t,e){return e},pagination:t.pagination,dataSource:t.dataSource,bordered:""},scopedSlots:t._u([{key:"serial",fn:function(e,a,o){return n("span",{},[t._v(" "+t._s(o+1)+" ")])}}])}),n("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-form-model-item",{attrs:{label:"方案名称"}},[n("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("a-form-model-item",{attrs:{label:"方案名称"}},[n("a-textarea",{attrs:{rows:4},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFooter,expression:"showFooter"}],style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[n("a-button",{staticStyle:{"margin-right":"8px"},on:{click:t.handleCancel}},[t._v(" 取消 ")]),n("a-button",{attrs:{type:"primary"},on:{click:t.handleOnSave}},[t._v(" 保存 ")])],1)],1)},o=[],i=(n("a9e3"),n("88bc")),r=n.n(i),s={labelCol:{span:5},wrapperCol:{span:19}},l=[{title:"ID",scopedSlots:{customRender:"serial"}},{title:"纬度",dataIndex:"lat"},{title:"经度",dataIndex:"lng"}],d={name:"FormDrawer",props:{title:{type:String,required:!0},width:{type:Number,required:!1,default:450},visible:{type:Boolean,required:!1,default:!1},dataSource:{type:Array,required:!0},columns:{type:Array,default:function(){return l}},pagination:{type:Object,default:function(){return{pageSize:5,total:0}}},showFooter:{type:Boolean,default:!1}},data:function(){return{form:{},rules:{name:[{required:!0,message:"请输入方案名称"}],description:[{max:240,message:"方案描述必须在240字以内"}]},formItemLayout:s}},methods:{edit:function(t){this.form=r()(t,"id","name","description")},reset:function(){this.form={}},handleCancel:function(){this.reset(),this.$emit("cancel")},handleOnClose:function(){this.$emit("close")},handleOnSave:function(){var t=this;this.$refs.form.validate((function(e){e&&t.$emit("ok",t.form)}))}}},c=d,u=n("2877"),h=Object(u["a"])(c,a,o,!1,null,null,null);e["default"]=h.exports},be76:function(t,e,n){"use strict";n("b23e")},c88e:function(t,e,n){t.exports=n.p+"assets/unchecked.be913992.svg"},ca06:function(t,e,n){var a,o;(function(){var i=window.console||{error:function(){},warn:function(){}};function r(t){t.Control.Loading=t.Control.extend({options:{delayIndicator:null,position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(e){t.setOptions(this,e),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(e){if(this.options.spinjs&&"function"!==typeof Spinner)return i.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(e),this._addMapListeners(e),this.options.separate||this.zoomControl||(e.zoomControl?this.zoomControl=e.zoomControl:e.zoomsliderControl&&(this.zoomControl=e.zoomsliderControl));var n,a="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(n=this.zoomControl._container,a+=" leaflet-bar-part-bottom leaflet-bar-part last",t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):n=t.DomUtil.create("div","leaflet-control-zoom leaflet-control-layer-container leaflet-bar"),this._indicatorContainer=n,this._indicator=t.DomUtil.create("a",a,n),this.options.spinjs&&(this._spinner=new Spinner(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),n},onRemove:function(t){this._removeLayerListeners(t),this._removeMapListeners(t)},removeFrom:function(e){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(e),this):t.Control.prototype.removeFrom.call(this,e)},addLoader:function(t){if(this._dataLoaders[t]=!0,this.options.delayIndicator&&!this.delayIndicatorTimeout){var e=this;this.delayIndicatorTimeout=setTimeout((function(){e.updateIndicator(),e.delayIndicatorTimeout=null}),this.options.delayIndicator)}else this.updateIndicator()},removeLoader:function(t){delete this._dataLoaders[t],this.updateIndicator(),this.options.delayIndicator&&this.delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this.delayIndicatorTimeout),this.delayIndicatorTimeout=null)},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var t,e=0;for(t in this._dataLoaders)this._dataLoaders.hasOwnProperty(t)&&e++;return e},_showIndicator:function(){t.DomUtil.addClass(this._indicator,"is-loading"),t.DomUtil.addClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof t.Control.Zoomslider&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){t.DomUtil.removeClass(this._indicator,"is-loading"),t.DomUtil.removeClass(this._indicatorContainer,"is-loading"),this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof t.Control.Zoomslider&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){var t=this.zoomControl._container,e=t.children.length-1;while(e>0){var n=t.children[e];if(this._indicator!==n&&0!==n.offsetWidth&&0!==n.offsetHeight)break;e--}return t.children[e]},_handleLoading:function(t){this.addLoader(this.getEventId(t))},_handleBaseLayerChange:function(e){var n=this;e.layer&&e.layer.eachLayer&&"function"===typeof e.layer.eachLayer?e.layer.eachLayer((function(t){n._handleBaseLayerChange({layer:t})})):t.TileLayer.Canvas&&e.layer instanceof t.TileLayer.Canvas||n._handleLoading(e)},_handleLoad:function(t){this.removeLoader(this.getEventId(t))},getEventId:function(t){return t.id?t.id:t.layer?t.layer._leaflet_id:t.target._leaflet_id},_layerAdd:function(t){if(t.layer&&t.layer.on)try{t.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(e){i.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",t.layer),i.warn("L.Control.Loading: Full details",e)}},_layerRemove:function(t){if(t.layer&&t.layer.off)try{t.layer.off({loading:this._handleLoading,load:this._handleLoad},this)}catch(e){i.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",t.layer),i.warn("L.Control.Loading: Full details",e)}},_addLayerListeners:function(t){t.eachLayer((function(t){t.on&&t.on({loading:this._handleLoading,load:this._handleLoad},this)}),this),t.on("layeradd",this._layerAdd,this),t.on("layerremove",this._layerRemove,this)},_removeLayerListeners:function(t){t.eachLayer((function(t){t.off&&t.off({loading:this._handleLoading,load:this._handleLoad},this)}),this),t.off("layeradd",this._layerAdd,this),t.off("layerremove",this._layerRemove,this)},_addMapListeners:function(t){t.on({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(t){t.off({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),t.Map.addInitHook((function(){this.options.loadingControl&&(this.loadingControl=new t.Control.Loading,this.addControl(this.loadingControl))})),t.Control.loading=function(e){return new t.Control.Loading(e)}}a=[n("e11e")],o=function(t){r(t)}.apply(e,a),void 0===o||(t.exports=o)})()},d5bb:function(t,e,n){t.exports=n.p+"assets/geekblue.ebe8f201.svg"},d8a5:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{visible:t.visible,width:680,title:"选择预设卡口方案"},on:{ok:t.handleOk,cancel:function(){t.$emit("cancel")}}},[n("a-table",{attrs:{columns:t.columns,"row-key":"id",customRow:t.customRow,pagination:t.pagination,loading:t.loading,"data-source":t.data,rowSelection:t.rowSelection}})],1)},o=[],i=n("5530"),r=n("8857"),s={name:"PresetModal",props:{visible:{type:Boolean,required:!0}},data:function(){return{modalVisible:!1,data:[],queryParam:{},pagination:{},loading:!1,columns:[{title:"方案名称",dataIndex:"name"},{title:"方案描述",dataIndex:"description"},{title:"方案卡口数",dataIndex:"count"},{title:"创建时间",dataIndex:"createTime"}],selectedRowKeys:[],selectedRows:[]}},computed:{rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;r["a"].list(this.queryParam).then((function(e){var n=Object(i["a"])({},t.pagination);n.total=e.data.total,t.loading=!1,t.data=e.data.list,t.pagination=n}))},customRow:function(t,e){var n=this;return{on:{click:function(){n.selectedRowKeys=[t.id],n.selectedRows=[t]}}}},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},handleOk:function(){this.selectedRowKeys.length>0&&this.$emit("ok",this.selectedRowKeys[0])}}},l=s,d=n("2877"),c=Object(d["a"])(l,a,o,!1,null,null,null);e["default"]=c.exports},ff41:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("leaflet-map",{staticStyle:{height:"50vh"},on:{onMapInit:t.initMap}}),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleCreate}},[t._v(" 新增 ")]),t.clearMapVisible?n("a-button",{on:{click:t.handleClearMap}},[n("a-icon",{attrs:{type:"undo"}}),t._v("清空地图 ")],1):t._e(),t.mapOpsVisible?n("a-button",{attrs:{type:"primary"},on:{click:function(e){t.drawer.visible=!0}}},[n("a-icon",{attrs:{type:"eye"}}),t._v("查看已选数据 ")],1):t._e(),n("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.tableOpsVisible,expression:"tableOpsVisible"}]},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[t._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",showPagination:"auto",columns:t.columns,data:t.loadData,alert:{show:!0,clear:!0},rowSelection:t.rowSelection},scopedSlots:t._u([{key:"serial",fn:function(e,a,o){return n("span",{},[t._v(" "+t._s(o+1)+" ")])}},{key:"action",fn:function(e,a){return[n("div",{staticClass:"editable-row-operations"},[n("span",[n("a",{staticClass:"preview",on:{click:function(e){return t.handlePreviewPlan(a)}}},[t._v("预览")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{staticClass:"edit",on:{click:function(e){return t.handleEditPlan(a)}}},[t._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"你确定要删除这条方案吗?",placement:"rightBottom","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteById(a)}}},[n("a",{staticClass:"delete",attrs:{href:"#"}},[t._v("删除")])])],1)])]}}])}),n("preset-modal",{attrs:{visible:t.modalVisible},on:{ok:t.handleModalOk,cancel:function(e){t.modalVisible=!1}}}),n("form-drawer",{ref:"formDrawer",attrs:{title:"布设卡口方案坐标点数据集",visible:t.drawer.visible,showFooter:!t.drawer.isPreview,dataSource:t.checkpoints,pagination:{pageSize:5,total:t.checkpoints.length}},on:{close:function(e){t.drawer.visible=!1},cancel:t.handleFormDrawerCancel,ok:t.handleOnSave}})],1)},o=[],i=(n("4160"),n("c975"),n("d81d"),n("45fc"),n("a434"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("38f8")),r=n("e11e"),s=n("2af9"),l=n("8857"),d=n("4e02"),c=n("d8a5"),u=n("2e27"),h=n("bd22"),f={name:"DesignList",components:{LeafletMap:i["a"],STable:s["i"],PresetModal:c["default"],FormDrawer:h["default"]},data:function(){var t=this;return{map:{},modalVisible:!1,clearMapVisible:!1,designMarkers:[],mapMark:{isOpen:!1,cursorStyle:null},selectedPresetId:null,drawer:{isPreview:!1,visible:!1},columns:[{title:"ID",scopedSlots:{customRender:"serial"}},{title:"方案名称",dataIndex:"name"},{title:"方案描述",dataIndex:"description"},{title:"预设卡口方案编号",dataIndex:"presetId"},{title:"方案卡口数",dataIndex:"count"},{title:"创建时间",dataIndex:"createTime"},{table:"操作",title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],selectedRowKeys:[],selectedRows:[],loadData:function(e){var n=Object.assign({},t.queryParam);return n.current=e.pageNo,n.pageSize=e.pageSize,d["a"].list(n).then((function(e){return t.$log.debug("布设卡口方案列表数据:",e.data),{pageSize:e.data.pageSize,pageNo:e.data.current,totalCount:e.data.total,totalPage:e.data.pages,data:e.data.list}})).catch((function(e){return t.$message.error("查询出错:".concat(e)),{pageSize:0,pageNo:1,totalCount:0,totalPage:0,data:[]}}))}}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},tableOpsVisible:function(){return this.selectedRowKeys.length>0},mapOpsVisible:function(){return this.checkpoints.length>0},checkpoints:function(){return this.designMarkers.map((function(t){return t.getLatLng()}))}},methods:{initMap:function(t){this.map=t,this.markerLayerGroup=r["featureGroup"]().addTo(this.map)},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},handleCreate:function(){this.modalVisible=!0,this.$refs.formDrawer.reset()},handleModalOk:function(t){var e=this;this.modalVisible=!1,this.designMarkers=[],this.selectedPresetId=t,l["a"].getById(t).then((function(t){e.handleDrawMarkers(t.data.checkpoints,!0)}))},handleDrawMarkers:function(t,e){var n=this;this.clearMapVisible=!0,0!==t.length&&(t.forEach((function(t){var a=n.drawPresetMarker(t);n.markerLayerGroup.addLayer(a),e&&a.on("click",(function(t){return n.handleOnMarkerClick(t)}))})),this.map.fitBounds(this.markerLayerGroup.getBounds()))},drawPresetMarker:function(t){return r["marker"](t,{icon:u["e"]})},handleOnMarkerClick:function(t){var e=t.target,n=this.designMarkers.indexOf(e);n>-1?(this.designMarkers.splice(n,1),t.target.setIcon(u["e"])):(this.designMarkers.push(t.target),t.target.setIcon(u["a"]))},clearSelected:function(){this.selectedRows=[],this.selectedRowKeys=[]},handleClearMap:function(){this.markerLayerGroup.clearLayers(),this.designMarkers=[],this.clearMapVisible=!1},handlePreviewPlan:function(t){var e=this;this.drawer.isPreview=!0,d["a"].getById(t.id).then((function(t){var n=t.data.checkpoints||[];e.handleDrawMarkers(n,!1)}))},handleEditPlan:function(t){var e=this;this.handleClearMap(),this.drawer.isPreview=!1;var n=l["a"].getById(t.presetId),a=d["a"].getById(t.id);Promise.all([n,a]).then((function(t){var n=t[0].data,a=t[1].data;e.$refs.formDrawer.edit(a),e.selectedPresetId=n.id;var o=n.checkpoints.map((function(t){return[t.lat,t.lng]}));e.handleDrawMarkers(o,!0);var i=a.checkpoints||[];e.markerLayerGroup.eachLayer((function(t){var n=t.getLatLng(),a=i.some((function(t){return t.lat===n.lat&&t.lng===n.lng}));a&&(e.designMarkers.push(t),t.setIcon(u["a"]))}))}))},handleDeleteById:function(){},handleResetForm:function(){this.drawer.visible=!1,this.handleClearMap()},handleOnSave:function(t){var e=this,n=Object.assign({},t);n.checkpoints=this.checkpoints,n.presetId=this.selectedPresetId,n.id?(this.$log.debug("编辑布设卡口",n),d["a"].updateById(n.id,n).then((function(t){e.$message.success("保存成功"),e.$refs.table.refresh(),e.handleResetForm()}))):d["a"].create(n).then((function(t){e.$message.success("保存成功"),e.$refs.table.refresh(),e.handleResetForm()}))},handleFormDrawerCancel:function(){this.handleResetForm(),this.$refs.formDrawer.reset()}}},p=f,m=n("2877"),y=Object(m["a"])(p,a,o,!1,null,null,null);e["default"]=y.exports}}]);